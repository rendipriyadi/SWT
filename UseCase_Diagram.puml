@startuml Safety Walk and Talk - Use Case Diagram
!theme plain
skinparam actorStyle awesome
skinparam packageStyle rectangle
skinparam linetype ortho
top to bottom direction

' System Boundary
rectangle "Safety Walk and Talk System" {
  
  ' Actors (inside for better layout)
  actor User as U
  actor Admin as A
  actor "System\n(Automated)" as S
  
  ' User Use Cases - Report Management
  package "Report Management" {
    usecase UC1 as "Create Report"
    usecase UC1a as "Upload Photos"
    usecase UC1b as "Select Area"
    usecase UC1c as "Select PIC"
    usecase UC1d as "Select Category"
    usecase UC2 as "View Report List"
    usecase UC2a as "Filter & Search\n(DataTables)"
    usecase UC3 as "View Report Detail"
    usecase UC4 as "Edit Report"
    usecase UC4a as "Modify Photos"
    usecase UC5 as "Complete Report\n(Tindakan)"
    usecase UC5a as "Upload Completion\nPhotos"
    usecase UC5b as "Generate PDF"
    usecase UC6 as "Update Status"
    usecase UC7 as "Delete Report"
  }
  
  ' User Use Cases - Dashboard & Monitoring
  package "Dashboard & Monitoring" {
    usecase UC8 as "View Dashboard"
    usecase UC8a as "View Statistics\n& Charts"
    usecase UC8b as "View Monthly Trends\n(Line Chart)"
    usecase UC8c as "View Area Distribution\n(Bar Chart)"
    usecase UC8d as "View Category Distribution\n(Pie Chart)"
  }
  
  ' User Use Cases - History
  package "History & Export" {
    usecase UC9 as "View History"
    usecase UC9a as "Filter by Period"
    usecase UC10 as "Export PDF"
  }
  
  ' Admin Use Cases - Master Data
  package "Master Data Management" {
    usecase UC11 as "Manage Areas"
    usecase UC11a as "Create/Edit/Delete\nArea"
    usecase UC11b as "Manage PICs"
    usecase UC12 as "Manage Departments"
    usecase UC12a as "Create/Edit/Delete\nDepartment"
    usecase UC13 as "Manage Problem\nCategories"
    usecase UC13a as "Create/Edit/Delete\nCategory"
    usecase UC13b as "Set Category Color"
    usecase UC13c as "Activate/Deactivate\nCategory"
  }
  
  ' System Use Cases - Automated
  package "Automated Processes" {
    usecase UC14 as "Send Email\nNotifications"
    usecase UC14a as "Assignment Email"
    usecase UC14b as "Edit Email"
    usecase UC14c as "Completion Email\n(with PDF)"
    usecase UC15 as "Send Reminders\n(Cron Jobs)"
    usecase UC15a as "H-2 Deadline\nReminder"
    usecase UC15b as "Overdue Reminder"
  }
}

' User Relationships
U --> UC1
U --> UC2
U --> UC3
U --> UC4
U --> UC5
U --> UC6
U --> UC7
U --> UC8
U --> UC9

' Admin Relationships
A --> UC11
A --> UC12
A --> UC13

' System Relationships
S --> UC14
S --> UC15

' Include Relationships - Report Management
UC1 .> UC1a : <<include>>
UC1 .> UC1b : <<include>>
UC1 .> UC1c : <<include>>
UC1 .> UC1d : <<include>>
UC2 .> UC2a : <<include>>
UC4 .> UC4a : <<include>>
UC5 .> UC5a : <<include>>
UC5 .> UC5b : <<include>>

' Include Relationships - Dashboard
UC8 .> UC8a : <<include>>
UC8 .> UC8b : <<include>>
UC8 .> UC8c : <<include>>
UC8 .> UC8d : <<include>>

' Include Relationships - History
UC9 .> UC9a : <<include>>

' Include Relationships - Master Data
UC11 .> UC11a : <<include>>
UC11 .> UC11b : <<include>>
UC12 .> UC12a : <<include>>
UC13 .> UC13a : <<include>>
UC13 .> UC13b : <<include>>
UC13 .> UC13c : <<include>>

' Include Relationships - Automated
UC14 .> UC14a : <<include>>
UC14 .> UC14b : <<include>>
UC14 .> UC14c : <<include>>
UC15 .> UC15a : <<include>>
UC15 .> UC15b : <<include>>

' Extend Relationships
UC9 <. UC10 : <<extend>>

note right of S
  Automated processes run via:
  - Cron jobs (scheduled tasks)
  - Event triggers (on create/edit/complete)
end note

note bottom of "Safety Walk and Talk System"
  **Note**: Current implementation has no authentication system.
  All features are publicly accessible.
end note

@enduml
